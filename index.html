<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EduSpec â€“ Smart Accreditation Assistant</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <nav class="navbar">
    <div class="nav-container">
      <div class="logo-container">
        <img src="media/logo.png" alt="Logo" class="logo-image" />
        <span class="logo-text">EduSpec</span>
      </div>
      <ul class="nav-links">
        <li><a href="#hero">Home</a></li>
        <li><a href="#overview">Overview</a></li>
        <li><a href="#who">Users</a></li>
        <li><a href="#upload">Upload</a></li>
        <li><a href="#charts">Charts</a></li>
      </ul>
    </div>
  </nav>

  <!-- Hero Section -->
  <section id="hero" class="hero">
    <div class="glass-container">
      <h1>Smarter Accreditation Starts Here</h1>
      <p>Automate and visualize academic specification data with ease.</p>
    </div>
  </section>

  <!-- Overview Section -->
  <section id="overview" class="section">
    <div class="section-content">
      <h2>Project Overview</h2>
      <p>Our mission is to automate the extraction of accreditation data from unstructured Word documents into structured, usable formats. This system supports Saudi universities in achieving accreditation goals and aligning with Vision 2030.</p>
    </div>
  </section>

  <!-- Who Can Use It Section -->
<section id="who" class="section usage-section">
  <h2>Who Can Use It & What It Offers</h2>
  <div class="usage-container">
    <div class="usage-card">
      <h3>Faculty Members</h3>
      <p>Easily upload and structure your course and field specifications without manual formatting.</p>
    </div>
    <div class="usage-card">
      <h3>Quality Assurance Units</h3>
      <p>Quickly visualize and assess alignment with NCAAA standards using built-in charting tools.</p>
    </div>
    <div class="usage-card">
      <h3>Academic Program Coordinators</h3>
      <p>Track learning outcomes, teaching methods, and assessments across all departments effortlessly.</p>
    </div>
    <div class="usage-card">
      <h3>Institutional Planners</h3>
      <p>Leverage automated data extraction to support accreditation and Vision 2030 compliance.</p>
    </div>
  </div>
</section>


  <!-- Upload Section -->
  <section id="upload" class="section">
    <h2>Upload Specification</h2>
    <form method="POST" enctype="multipart/form-data" action="/upload" class="upload-form">
      <select name="file_type" id="specType" class="dropdown" required>
        <option value="" disabled selected>Select Type</option>
        <option value="Course">Course Specification</option>
        <option value="Experience">Field Experience Specification</option>
      </select>
      <input type="file" name="docx_files" id="fileInput" class="file-input" accept=".doc,.docx" multiple required />
      <button class="upload-btn" id="uploadBtn" type="submit">Upload</button>
    </form>
    <div id="resultMessage" class="result-message"></div>
  </section>

  <!-- Charts Section -->
  <section id="charts" class="section">
    <h2>Evaluation Charts</h2>
<div class="upload-form">
  <div class="chart-filters">
    
    <!-- File Type Selection -->
    <select id="fileType" class="dropdown" onchange="handleFileTypeChange()">
      <option value="" disabled selected>Select File Type</option>
      <option value="experience">Experience</option>
      <option value="course">Course</option>
    </select>

    <!-- Chart Type Selection -->
    <select id="chartType" class="dropdown" onchange="updateDepartments()">
      <option value="" disabled selected>Select Chart Type</option>
    </select>

    <!-- Department Selection -->
    <select id="department" class="dropdown">
      <option value="" disabled selected>Select Department</option>
    </select>

    <!-- Subject Code Input -->
    <input type="text" id="subjectCode" class="file-input"
           placeholder="e.g. 390 (optional)"
           maxlength="3"
           pattern="\\d{3}"
           oninput="validateSubjectCode(this)" />

    <button id="loadCharts" class="upload-btn">Load Charts</button>
  </div>
</div>

<script>
  function handleFileTypeChange() {
    updateChartTypes();
    updateDepartments();
  }

  function updateChartTypes() {
    const chartSelect = document.getElementById("chartType");
    const fileType = document.getElementById("fileType").value;

    chartSelect.innerHTML = '<option value="" disabled selected>Select Chart Type</option>';

    const courseCharts = [
      { value: "assessment", label: "Assessment Distribution" },
      { value: "outcomes", label: "Learning Outcomes & Assessment" },
      { value: "required", label: "Required vs Elective Courses per Department" },
      { value: "resources", label: "Learning Resources and References" }
    ];

    const experienceCharts = [
      { value: "location", label: "Field Experience Location" },
      { value: "cloCount", label: "CLO Count By Group" },
      { value: "stakeholder", label: "Stakeholder Activities" },
      { value: "evaluation", label: "Evaluation Methods (Direct or Indirect)" }
    ];

    const charts = fileType === "experience" ? experienceCharts : courseCharts;

    charts.forEach(chart => {
      const option = document.createElement("option");
      option.value = chart.value;
      option.textContent = chart.label;
      chartSelect.appendChild(option);
    });
  }

  function updateDepartments() {
    const departmentSelect = document.getElementById("department");
    const fileType = document.getElementById("fileType").value;
    const chartType = document.getElementById("chartType").value;

    departmentSelect.innerHTML = '<option value="" disabled selected>Select Department</option>';

    const courseDepartments = ["BIO", "STAT", "PHYS", "FNU", "MET"];
    const fullNamedDepartments = [
      "STATISTICS",
      "PHYSICS",
      "DEPARTMENT OF BIOLOGICAL SCIENCES",
      "FOOD AND Nutrition",
      "Meteorology"
    ];
    const experienceDepartments = ["BIO", "FNU"];

    let departments = [];

    if (fileType === "experience") {
      departments = experienceDepartments;
    } else if (fileType === "course") {
      if (chartType === "required") {
        departments = fullNamedDepartments;
      } else {
        departments = courseDepartments;
      }
    }

    departments.forEach(dept => {
      const option = document.createElement("option");
      option.value = dept;
      option.textContent = dept;
      departmentSelect.appendChild(option);
    });
  }

  function validateSubjectCode(input) {
    const pattern = /^\d{0,3}$/;
    if (!pattern.test(input.value)) {
      input.setCustomValidity("Please enter up to 3 digits only.");
    } else {
      input.setCustomValidity("");
    }
  }
</script>



    <div id="chartArea">
      <canvas id="chartAll" width="400" height="250"></canvas>
      <canvas id="chartSubject" width="400" height="250" style="display: none;"></canvas>
      <div id="chartError" class="message error" style="display: none;"></div>
    </div>

    <div id="queryList" class="query-list"></div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <p>&copy; 2025 EduSpec | Built for Saudi Universities | Vision 2030 Aligned</p>
  </footer>
<div class="background-animation"></div>

  <script src="script.js"></script>
</body>
</html>
